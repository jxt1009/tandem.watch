{"version":3,"file":"popup.js","mappings":"MAAA,IAAIA,EAAS,CAAEC,aAAa,EAAOC,OAAQ,KAAMC,OAAQ,KAAMC,gBAAgB,GAE/E,MAAMC,EAAWC,SAASC,eAAe,UACnCC,EAAaF,SAASC,eAAe,eACrCE,EAAkBH,SAASC,eAAe,oBAC1CG,EAAYJ,SAASC,eAAe,cACpCI,EAAeL,SAASC,eAAe,iBACvCK,EAAWN,SAASC,eAAe,aACnCM,EAAUP,SAASC,eAAe,YAClCO,EAAWR,SAASC,eAAe,aACnCQ,EAAYT,SAASC,eAAe,cACpCS,EAAcV,SAASC,eAAe,gBACtCU,EAAcX,SAASC,eAAe,gBACtCW,EAAaZ,SAASC,eAAe,eACrCY,EAAcb,SAASC,eAAe,gBACtCa,EAAcd,SAASC,eAAe,iBAa5C,SAASc,IACPC,OAAOC,QAAQC,YAAY,CAAEC,KAAM,cAAiBC,IAC9CJ,OAAOC,QAAQI,WACfD,IACF1B,EAAS0B,EAMf,WACE,MAAM,YAAEzB,EAAW,OAAEC,EAAM,OAAEC,GAAWH,EACpCC,GACFI,EAASuB,UAAY,mBACrBpB,EAAWqB,YAAc,eACzBpB,EAAgBqB,UAAUC,OAAO,UACjCnB,EAASkB,UAAUE,IAAI,UACvBnB,EAAQiB,UAAUC,OAAO,UACzBjB,EAASgB,UAAUC,OAAO,UAC1BrB,EAAUoB,UAAUC,OAAO,UAC3Bf,EAAYa,YAAc3B,EAC1Be,EAAYY,YAAc1B,IAE1BE,EAASuB,UAAY,sBACrBpB,EAAWqB,YAAc,kBACzBpB,EAAgBqB,UAAUC,OAAO,UACjCnB,EAASkB,UAAUC,OAAO,UAC1BlB,EAAQiB,UAAUE,IAAI,UACtBlB,EAASgB,UAAUE,IAAI,UACvBtB,EAAUoB,UAAUE,IAAI,UACxBrB,EAAamB,UAAUE,IAAI,UAC3Bd,EAAWe,UAAY,KACvBd,EAAYc,UAAY,KAE5B,CA7BMC,KAGN,CAnBAb,IAKET,EAASuB,iBAAiB,QA0C5BC,iBACE,MAAMlC,EAASa,EAAUsB,MAAMC,aAAUC,EACzC3B,EAAS4B,UAAW,EACpBhC,EAAWqB,YAAc,kBACzBP,OAAOC,QAAQC,YAAY,CAAEC,KAAM,cAAevB,UAAWwB,IACvDA,EAASe,QACXC,WAAWrB,EAAc,MAEzBsB,MAAM,UAAYjB,EAASkB,OAC3BpC,EAAWqB,YAAc,kBACzBjB,EAAS4B,UAAW,IAG1B,GAtDE3B,EAAQsB,iBAAiB,QAwD3B,WACEb,OAAOC,QAAQC,YAAY,CAAEC,KAAM,cAAgB,KACjDV,EAAUsB,MAAQ,GAClBhB,KAEJ,GA5DEP,EAASqB,iBAAiB,QA8D5B,WACE,MAAMU,EAAgB9B,EAAUsB,MAAMC,QAAUtC,EAAOE,aAAUqC,EACjEzB,EAAS0B,UAAW,EACpBhC,EAAWqB,YAAc,kBACzBP,OAAOC,QAAQC,YAAY,CAAEC,KAAM,cAAgB,KACjDH,OAAOC,QAAQC,YAAY,CAAEC,KAAM,cAAevB,OAAQ2C,GAAkBnB,IAC1EZ,EAAS0B,UAAW,EAChBd,GAAYA,EAASe,QACvBC,WAAWrB,EAAc,MAEzBsB,MAAM,2BAA6BjB,GAAYA,EAASkB,MAAQlB,EAASkB,MAAQ,kBACjFpC,EAAWqB,YAAc,sBAIjC,GA5EET,EAAYe,iBAAiB,QA8E/B,WACMnC,EAAOE,SACT4C,UAAUC,UAAUC,UAAUhD,EAAOE,QACrCkB,EAAYS,YAAc,IAC1Ba,WAAW,KAAQtB,EAAYS,YAAc,MAAS,KAE1D,GAGER,IACA4B,YAAY5B,EAAc,KAG5BC,OAAOC,QAAQ2B,UAAUC,YAAaC,IACf,2BAAjBA,EAAQ3B,OACVN,EAAYc,UAAYmB,EAAQC,S","sources":["webpack://toperparty/./chrome-extension/src/ui/popup.main.js"],"sourcesContent":["let status = { isConnected: false, roomId: null, userId: null, hasLocalStream: false };\r\n\r\nconst statusEl = document.getElementById('status');\r\nconst statusText = document.getElementById('status-text');\r\nconst controlsSection = document.getElementById('controls-section');\r\nconst partyInfo = document.getElementById('party-info');\r\nconst videoSection = document.getElementById('video-section');\r\nconst startBtn = document.getElementById('start-btn');\r\nconst stopBtn = document.getElementById('stop-btn');\r\nconst resetBtn = document.getElementById('reset-btn');\r\nconst roomInput = document.getElementById('room-input');\r\nconst roomDisplay = document.getElementById('room-display');\r\nconst userDisplay = document.getElementById('user-display');\r\nconst localVideo = document.getElementById('local-video');\r\nconst remoteVideo = document.getElementById('remote-video');\r\nconst copyRoomBtn = document.getElementById('copy-room-btn');\r\n\r\nupdateStatus();\r\nsetupEventListeners();\r\nstartStatusPolling();\r\n\r\nfunction setupEventListeners() {\r\n  startBtn.addEventListener('click', startParty);\r\n  stopBtn.addEventListener('click', stopParty);\r\n  resetBtn.addEventListener('click', resetParty);\r\n  copyRoomBtn.addEventListener('click', copyRoomId);\r\n}\r\n\r\nfunction updateStatus() {\r\n  chrome.runtime.sendMessage({ type: 'GET_STATUS' }, (response) => {\r\n    if (chrome.runtime.lastError) return;\r\n    if (response) {\r\n      status = response;\r\n      updateUI();\r\n    }\r\n  });\r\n}\r\n\r\nfunction updateUI() {\r\n  const { isConnected, roomId, userId } = status;\r\n  if (isConnected) {\r\n    statusEl.className = 'status connected';\r\n    statusText.textContent = 'ðŸŸ¢ Connected';\r\n    controlsSection.classList.remove('hidden');\r\n    startBtn.classList.add('hidden');\r\n    stopBtn.classList.remove('hidden');\r\n    resetBtn.classList.remove('hidden');\r\n    partyInfo.classList.remove('hidden');\r\n    roomDisplay.textContent = roomId;\r\n    userDisplay.textContent = userId;\r\n  } else {\r\n    statusEl.className = 'status disconnected';\r\n    statusText.textContent = 'ðŸ”´ Disconnected';\r\n    controlsSection.classList.remove('hidden');\r\n    startBtn.classList.remove('hidden');\r\n    stopBtn.classList.add('hidden');\r\n    resetBtn.classList.add('hidden');\r\n    partyInfo.classList.add('hidden');\r\n    videoSection.classList.add('hidden');\r\n    localVideo.srcObject = null;\r\n    remoteVideo.srcObject = null;\r\n  }\r\n}\r\n\r\nasync function startParty() {\r\n  const roomId = roomInput.value.trim() || undefined;\r\n  startBtn.disabled = true;\r\n  statusText.textContent = 'â³ Connecting...';\r\n  chrome.runtime.sendMessage({ type: 'START_PARTY', roomId }, (response) => {\r\n    if (response.success) {\r\n      setTimeout(updateStatus, 500);\r\n    } else {\r\n      alert('Error: ' + response.error);\r\n      statusText.textContent = 'ðŸ”´ Disconnected';\r\n      startBtn.disabled = false;\r\n    }\r\n  });\r\n}\r\n\r\nfunction stopParty() {\r\n  chrome.runtime.sendMessage({ type: 'STOP_PARTY' }, () => {\r\n    roomInput.value = '';\r\n    updateStatus();\r\n  });\r\n}\r\n\r\nfunction resetParty() {\r\n  const desiredRoomId = roomInput.value.trim() || status.roomId || undefined;\r\n  resetBtn.disabled = true;\r\n  statusText.textContent = 'â™»ï¸ Resetting...';\r\n  chrome.runtime.sendMessage({ type: 'STOP_PARTY' }, () => {\r\n    chrome.runtime.sendMessage({ type: 'START_PARTY', roomId: desiredRoomId }, (response) => {\r\n      resetBtn.disabled = false;\r\n      if (response && response.success) {\r\n        setTimeout(updateStatus, 500);\r\n      } else {\r\n        alert('Error resetting party: ' + (response && response.error ? response.error : 'Unknown error'));\r\n        statusText.textContent = 'ðŸ”´ Disconnected';\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nfunction copyRoomId() {\r\n  if (status.roomId) {\r\n    navigator.clipboard.writeText(status.roomId);\r\n    copyRoomBtn.textContent = 'âœ“';\r\n    setTimeout(() => { copyRoomBtn.textContent = 'ðŸ“‹'; }, 2000);\r\n  }\r\n}\r\n\r\nfunction startStatusPolling() {\r\n  updateStatus();\r\n  setInterval(updateStatus, 2000);\r\n}\r\n\r\nchrome.runtime.onMessage.addListener((request) => {\r\n  if (request.type === 'REMOTE_STREAM_RECEIVED') {\r\n    remoteVideo.srcObject = request.stream;\r\n  }\r\n});\r\n"],"names":["status","isConnected","roomId","userId","hasLocalStream","statusEl","document","getElementById","statusText","controlsSection","partyInfo","videoSection","startBtn","stopBtn","resetBtn","roomInput","roomDisplay","userDisplay","localVideo","remoteVideo","copyRoomBtn","updateStatus","chrome","runtime","sendMessage","type","response","lastError","className","textContent","classList","remove","add","srcObject","updateUI","addEventListener","async","value","trim","undefined","disabled","success","setTimeout","alert","error","desiredRoomId","navigator","clipboard","writeText","setInterval","onMessage","addListener","request","stream"],"ignoreList":[],"sourceRoot":""}