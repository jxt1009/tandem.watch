(()=>{var e={442:()=>{let e={isConnected:!1,roomId:null,userId:null,hasLocalStream:!1};const t=document.getElementById("status"),n=document.getElementById("status-text"),o=document.getElementById("controls-section"),s=document.getElementById("party-info"),r=document.getElementById("video-section"),d=document.getElementById("start-btn"),c=document.getElementById("stop-btn"),a=document.getElementById("reset-btn"),i=document.getElementById("room-input"),l=document.getElementById("room-display"),m=document.getElementById("user-display"),u=document.getElementById("local-video"),g=document.getElementById("remote-video"),y=document.getElementById("copy-room-btn");function E(){console.log("updateStatus called"),chrome.runtime.sendMessage({type:"GET_STATUS"},i=>{console.log("GET_STATUS response:",i),chrome.runtime.lastError?console.error("Failed to get status:",chrome.runtime.lastError):i?(e=i,console.log("Status updated:",e),function(){const{isConnected:i,roomId:y,userId:E,hasLocalStream:p}=e;i?(t.className="status connected",n.textContent="ðŸŸ¢ Connected",o.classList.remove("hidden"),d.classList.add("hidden"),c.classList.remove("hidden"),a.classList.remove("hidden"),s.classList.remove("hidden"),l.textContent=y,m.textContent=E):(t.className="status disconnected",n.textContent="ðŸ”´ Disconnected",o.classList.remove("hidden"),d.classList.remove("hidden"),c.classList.add("hidden"),a.classList.add("hidden"),s.classList.add("hidden"),r.classList.add("hidden"),u.srcObject=null,g.srcObject=null)}()):console.warn("No response from background script")})}E(),d.addEventListener("click",async function(){const e=i.value.trim()||void 0;try{d.disabled=!0,n.textContent="â³ Connecting...",chrome.runtime.sendMessage({type:"START_PARTY",roomId:e},e=>{e.success?(console.log("Party started successfully"),setTimeout(E,500)):(alert("Error: "+e.error),n.textContent="ðŸ”´ Disconnected",d.disabled=!1)})}catch(e){alert("Error starting party: "+e.message),d.disabled=!1}}),c.addEventListener("click",function(){chrome.runtime.sendMessage({type:"STOP_PARTY"},()=>{i.value="",E()})}),a.addEventListener("click",function(){const t=i.value.trim()||e.roomId||void 0;a.disabled=!0,n.textContent="â™»ï¸ Resetting...",chrome.runtime.sendMessage({type:"STOP_PARTY"},()=>{chrome.runtime.sendMessage({type:"START_PARTY",roomId:t},e=>{if(a.disabled=!1,e&&e.success)setTimeout(E,500);else{const t=e&&e.error?e.error:"Unknown error";alert("Error resetting party: "+t),n.textContent="ðŸ”´ Disconnected"}})})}),y.addEventListener("click",function(){e.roomId&&(navigator.clipboard.writeText(e.roomId),y.textContent="âœ“",setTimeout(()=>{y.textContent="ðŸ“‹"},2e3))}),E(),setInterval(E,2e3),chrome.runtime.onMessage.addListener((e,t,n)=>{"REMOTE_STREAM_RECEIVED"===e.type&&(console.log("Received remote stream"),g.srcObject=e.stream)})}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";n(442)})()})();
//# sourceMappingURL=popup.js.map